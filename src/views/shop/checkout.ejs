<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/cart.css">
 <link rel="stylesheet" href="/css/checkout.css" />
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
        <main>
            <ul class="cart__item-list">
                    <% products.forEach(p => { %>
                        <li class="cart__item">
                            <h1><%= p.productId.title %></h1>
                            <h2>Quantity: <%= p.quantity %></h2>
                        </li>
                    <% }) %>
                </ul>  
                <div class="centered">
                    <h2>Total: â‚¦<%= totalPrice  %> </h2>
                </div>
<div class="centered">
<form id="paymentForm">
<div class="form-group">

<input type="email" id="email-address" value="<%= userEmail %>" hidden />
</div>
<div class="form-group">
<input type="tel" id="amount" value="<%= totalPrice %>" hidden />
</div>
<div class="form-submit">
<button class="btn" type="submit" > Pay </button>

<!-- onclick="payWithPaystack()" -->
</div>
</form>
<button class="btn swipe-btn" id="swipe-btn"> SwipePay</button>
<div class="swipe-modal" id="swipe-modal">
 <swipe-pay-widget
        merchant-id="999612213216313344" //merchantid
        pay-amount= '240' //amount
        fallback-url = '/checkout' //fallbackurl
    ></swipe-pay-widget></div>
<script src="https://js.paystack.co/v1/inline.js"></script> 
<script type="module" src="/public/js/payments.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/swipe-pay@2.0.1"></script>
</div>
        </main>
        <%- include('../includes/end.ejs') %>